function RecipePull(e,t){const i=this;i.lastRecipeInfo=null,i.results=[];i.lastEndPointForResults=null,i.searchWord=null,i.makeHealthReqs=((e,t)=>{if(null!==e.reqs&&e.reqs.length>0)for(let i=0;i<e.reqs.length;i++)t+=`&diet=${e.reqs[i]}`;return t}),i.makeCalorieReqs=((e,t)=>(e.calorie.minimum&&e.calorie.minimum>0?e.calorie.maximum&&e.calorie.maximum>0?t+=`&calories=${e.calorie.minimum}-${e.calorie.maximum}`:t+=`&calories=${e.calorie.minimum}%2B`:e.calorie.maximum&&e.calorie.maximum>0&&(t+=`&calories=${e.calorie.maximum}`),t)),i.randomizeArray=(e=>{let t=[];for(;e.length>0;){let i=Math.floor(Math.random()*e.length);t.push(e[i]),e.splice(i,1)}return t}),i.searchRecipe=((s,r)=>{r&&(i.lastEndPointForResults=null,i.lastRecipeInfo=s,i.results=[]),null===i.lastRecipeInfo&&(i.lastRecipeInfo=s);let l=`https://api.edamam.com/search?q=${i.lastRecipeInfo.text}&app_id=8411dab9&app_key=e39015f1fb6854b7456a750bbca41575`;if(l=i.makeHealthReqs(i.lastRecipeInfo,l),l=i.makeCalorieReqs(i.lastRecipeInfo,l),i.lastRecipeInfo.exclusions){l+=`&exclude=${i.lastRecipeInfo.exclusions.foodExclusion.replace(/\s/g,"+")}`}return null===i.lastEndPointForResults&&(i.lastEndPointForResults=0),l+=`&from=${i.lastEndPointForResults}`,i.lastEndPointForResults+=48,l+=`&to=${i.lastEndPointForResults}`,console.log(l),e({url:l,method:"GET"}).then(e=>{let s=[];for(let t=0;t<e.data.hits.length;t++)s.push(e.data.hits[t].recipe);s=i.randomizeArray(s);for(let e=0;e<s.length;e++)i.results.push(s[e]);i.lastEndPointForResults=i.results.length,t.url("/results"),console.log(i.results)})}),i.getLastSearchParams=(()=>i.lastRecipeInfo),RecipePull.$inject=["$http","$location"]}function FavoritesService(){const e=this;e.favList=JSON.parse(localStorage.getItem("favs"))||[],e.addToFavorites=(t=>{e.favList.unshift(t),localStorage.setItem("favs",JSON.stringify(e.favList))}),e.deleteFavorites=(t=>{e.favList.splice(t,1),localStorage.setItem("favs",JSON.stringify(e.favList))})}angular.module("App",["ngRoute","ngStorage"]),angular.module("App").service("RecipePull",RecipePull),angular.module("App").service("FavoritesService",FavoritesService);const searchCriteria={templateUrl:"./searchCriteria.html",controller:["RecipePull","$location",function(e,t){const i=this;i.recipeReqs={calorie:{minimum:"",maximum:""}},i.restrictions=["low-carb","high-protein","low-fat"],i.search=(()=>{if(""!==i.recipeReqs.text){let t=[];for(const e in i.restrictionSelections)!0===i.restrictionSelections[e]&&t.push(e);i.recipeReqs.reqs=t,e.searchRecipe(i.recipeReqs,!0)}else console.log("search field cannot be null")})}]};angular.module("App").component("searchCriteria",searchCriteria);const recipeList={templateUrl:"recipeList.html",controller:["RecipePull","FavoritesService","$location",function(e,t,i){const s=this;s.recipeTitle="Recipes With",e.lastRecipeInfo?s.title=e.lastRecipeInfo.text:(s.recipeTitle="Search For",s.title="Recipes"),s.restrictions=["low-carb","high-protein","low-fat"],s.recipeReqs={calorie:{minimum:"",maximum:""}},s.results=e.results,s.addToFavorites=(e=>{t.addToFavorites(e),s.hideAddButton(index)}),s.getMoreResults=(()=>{e.searchRecipe(null,!1).then(()=>{s.results=e.results})}),s.search=(()=>{if(""!==s.recipeReqs.text){let t=[];for(const e in s.restrictionSelections)!0===s.restrictionSelections[e]&&t.push(e);s.recipeReqs.reqs=t,e.searchRecipe(s.recipeReqs,!0).then(()=>{s.results=e.results}),s.title=s.recipeReqs.text,s.show=!1}else console.log("search field cannot be null")}),s.location=(()=>{i.url("/favorites")})}]};angular.module("App").component("recipeList",recipeList);const favoritesPage={template:'\n  <div class="container">\n    <header class="favorites__header">\n      <nav class="results__header--nav">\n        <a href="#!/search" class="logo">Hungr</a>\n        <h1 class="fav--title">My Favorite Recipes</h1>\n        <button ng-click="$ctrl.location()" class="search-button">Search</button>\n      </nav>\n    </header>\n    <section class="favorites__container">\n      <ul class="favorites__list">\n          <li ng-repeat="recipe in $ctrl.favList track by $index">\n          <button class="delete--button" ng-click="$ctrl.deleteFavorites($index)">Delete</button>\n          <a href="{{ recipe.url }}" target="_blank"><img src="{{ recipe.image }}"></a>\n          <h1 class="recipe__label">{{ recipe.label }}</h1>\n          <p>Source: <span>{{ recipe.source }}<span></p>\n          <details>\n            <summary>Ingredients</summary>\n            <p ng-repeat="ingredient in recipe.ingredients">- {{ ingredient.text }}</p>\n          </details>\n          </li>\n      </ul>\n    </section>\n  </div>\n  ',controller:["FavoritesService","$location",function(e,t){this.favList=e.favList,this.deleteFavorites=(t=>{e.deleteFavorites(t)}),this.location=(()=>{t.url("/results")})}]};angular.module("App").component("favoritesPage",favoritesPage),angular.module("App").config(["$routeProvider",function(e){e.when("/results",{template:"<recipe-list></recipe-list>"}).when("/search",{template:"<search-criteria></search-criteria>"}).when("/favorites",{template:"<favorites-page></favorites-page>"}).otherwise({redirectTo:"/search"})}]);